const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CxM9dJ4S.js","../chunks/CmIejYcp.js","../chunks/B4gUkrlE.js","../chunks/CqHwZ7BE.js","../chunks/mpUCCd4c.js","../chunks/Dx6vkeWC.js","../chunks/CL2VAI88.js","../chunks/C7qgDVRg.js","../chunks/DJD7U2PO.js","../chunks/DxQGbdxi.js"])))=>i.map(i=>d[i]);
import{f as d,a as e,c as g}from"../chunks/DJD7U2PO.js";import{p as St,s as i,c as n,f as a,r as o,t as j,i as t,K as pt,a as Tt,d as Ct,L as X,M as y,o as Kt,N as Ut}from"../chunks/Dx6vkeWC.js";import{s as Q,d as Mt,e as Qt}from"../chunks/C7qgDVRg.js";import{i as ot}from"../chunks/CL2VAI88.js";import{S as ct,a as ft,e as mt,i as gt,P as xt,b as ht,c as jt,d as Rt,u as Bt,k as Nt}from"../chunks/BhmSlbsZ.js";import{c as _,b as Vt}from"../chunks/CtaYjfD-.js";import{p as qt}from"../chunks/Bzv0DcbW.js";import{D as bt,a as yt,b as $t,c as Pt,d as wt}from"../chunks/B_s6NT6V.js";import{u as zt,r as Gt,s as Ht}from"../chunks/mpUCCd4c.js";import{_ as _t}from"../chunks/PPVm8Dsz.js";var Jt=d("<!> <span> </span>",1),Wt=d('<!> <span class="ml-2"> </span>',1),Xt=d("<!> <!>",1),Yt=d("<!> <span> </span>",1),Zt=d('<!> <span class="ml-2"> </span>',1),te=d("<!> <!>",1),ee=d('<div class="p-4 space-y-4"><h3 class="font-display text-sm font-normal text-muted-foreground uppercase tracking-wide">Properties</h3> <div class="space-y-1"><span class="text-xs text-muted-foreground">Status</span> <!></div> <div class="space-y-1"><span class="text-xs text-muted-foreground">Priority</span> <!></div> <div class="space-y-1"><span class="text-xs text-muted-foreground">Created</span> <span class="block text-sm text-foreground"> </span></div></div>');function re(st,v){St(v,!0);const N=zt(),S=Object.values(jt),E=Object.values(Rt),l=pt(()=>new Date(v.interval.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}));function H(z){N.update(v.interval.id,I=>{I.status=z,I.updatedAt=Date.now()})}function J(z){N.update(v.interval.id,I=>{I.priority=z,I.updatedAt=Date.now()})}var R=ee(),T=i(n(R),2),W=i(n(T),2);_(W,()=>wt,(z,I)=>{I(z,{children:(Z,B)=>{var r=Xt(),c=a(r);_(c,()=>bt,(x,F)=>{F(x,{class:"flex items-center gap-2 w-full px-2 py-1.5 text-sm text-left rounded-sm hover:bg-muted transition-colors",children:(h,K)=>{var f=Jt(),L=a(f);ct(L,{get status(){return v.interval.status},size:14});var p=i(L,2),b=n(p,!0);o(p),j(()=>Q(b,ft[v.interval.status])),e(h,f)},$$slots:{default:!0}})});var D=i(c,2);_(D,()=>yt,(x,F)=>{F(x,{align:"start",children:(h,K)=>{var f=g(),L=a(f);_(L,()=>$t,(p,b)=>{b(p,{get value(){return v.interval.status},onValueChange:H,children:(V,tt)=>{var u=g(),s=a(u);mt(s,17,()=>S,gt,(k,$)=>{var O=g(),U=a(O);_(U,()=>Pt,(et,P)=>{P(et,{get value(){return t($)},children:(A,M)=>{var C=Wt(),q=a(C);ct(q,{get status(){return t($)},size:14});var rt=i(q,2),G=n(rt,!0);o(rt),j(()=>Q(G,ft[t($)])),e(A,C)},$$slots:{default:!0}})}),e(k,O)}),e(V,u)},$$slots:{default:!0}})}),e(h,f)},$$slots:{default:!0}})}),e(Z,r)},$$slots:{default:!0}})}),o(T);var Y=i(T,2),it=i(n(Y),2);_(it,()=>wt,(z,I)=>{I(z,{children:(Z,B)=>{var r=te(),c=a(r);_(c,()=>bt,(x,F)=>{F(x,{class:"flex items-center gap-2 w-full px-2 py-1.5 text-sm text-left rounded-sm hover:bg-muted transition-colors",children:(h,K)=>{var f=Yt(),L=a(f);xt(L,{get priority(){return v.interval.priority},size:14});var p=i(L,2),b=n(p,!0);o(p),j(()=>Q(b,ht[v.interval.priority])),e(h,f)},$$slots:{default:!0}})});var D=i(c,2);_(D,()=>yt,(x,F)=>{F(x,{align:"start",children:(h,K)=>{var f=g(),L=a(f);_(L,()=>$t,(p,b)=>{b(p,{get value(){return v.interval.priority},onValueChange:J,children:(V,tt)=>{var u=g(),s=a(u);mt(s,17,()=>E,gt,(k,$)=>{var O=g(),U=a(O);_(U,()=>Pt,(et,P)=>{P(et,{get value(){return t($)},children:(A,M)=>{var C=Zt(),q=a(C);xt(q,{get priority(){return t($)},size:14});var rt=i(q,2),G=n(rt,!0);o(rt),j(()=>Q(G,ht[t($)])),e(A,C)},$$slots:{default:!0}})}),e(k,O)}),e(V,u)},$$slots:{default:!0}})}),e(h,f)},$$slots:{default:!0}})}),e(Z,r)},$$slots:{default:!0}})}),o(Y);var nt=i(Y,2),m=i(n(nt),2),w=n(m,!0);o(m),o(nt),o(R),j(()=>Q(w,t(l))),e(st,R),Tt()}var ae=d('<div class="editor-loading" aria-live="polite"><p class="text-destructive"> </p></div>'),ne=d('<div class="editor-loading" aria-live="polite" aria-busy="true"><div class="editor-loading-spinner"></div> <p>Loading editor...</p></div>'),oe=d('<input type="text" class="w-full font-display text-3xl font-normal text-foreground bg-transparent border-none border-b-2 border-primary p-0 pb-1 leading-tight outline-none"/>'),se=d('<button type="button" class="w-full font-display text-3xl font-normal text-foreground leading-tight cursor-text transition-colors hover:text-primary text-left bg-transparent border-none p-0 pb-1 border-b-2 border-transparent"> </button>'),ie=d('<div class="max-w-[680px] mx-auto px-8 py-12 w-full"><div class="mb-8 pb-6 border-b border-border"><!></div> <div class="min-h-[200px]"><div></div></div></div>');function le(st,v){St(v,!0);const N=zt();let S=X(null),E=X(null),l=X(null),H=X(null),J=X(!0),R=X(!1),T=X(""),W=X(null);const Y=pt(()=>t(R)?t(T):v.interval.title);Ct(()=>{t(R)&&t(W)?.focus()}),Ct(()=>{t(l)&&t(S)&&!t(E)&&Promise.all([_t(()=>import("../chunks/CmIejYcp.js").then(r=>r.K),[],import.meta.url),_t(()=>import("../chunks/CxM9dJ4S.js"),__vite__mapDeps([0,1,2]),import.meta.url),_t(()=>import("../chunks/CqHwZ7BE.js"),__vite__mapDeps([3,1,4,5,6,7,8]),import.meta.url),_t(()=>import("../chunks/DxQGbdxi.js"),__vite__mapDeps([9,2,1]),import.meta.url)]).then(([{Editor:r},{default:c},{default:D},{default:x}])=>{!t(S)||!t(l)||y(E,new r({element:t(S),extensions:[c.configure({}),D.configure({fragment:t(l).fragment}),x.configure({placeholder:"Start writing..."})],editorProps:{attributes:{class:"tiptap-editor prose"}}}),!0)})}),Ct(()=>(v.intervalId,()=>{t(E)&&(t(E).destroy(),y(E,null)),y(l,null)})),Kt(async()=>{try{y(J,!0),y(H,null),y(l,await N.utils.prose(v.intervalId,"description"),!0),y(J,!1)}catch(r){console.error("[IntervalEditor] Failed to get prose binding:",r),y(H,r instanceof Error?r.message:"Failed to load editor",!0),y(J,!1)}}),Ut(()=>{t(E)&&(t(E).destroy(),y(E,null))});function it(){y(T,v.interval.title,!0),y(R,!0)}function nt(r){y(T,r,!0)}function m(){y(R,!1),t(T).trim()!==v.interval.title&&N.update(v.interval.id,r=>{r.title=t(T).trim()||"Untitled",r.updatedAt=Date.now()})}function w(r){r.key==="Enter"&&(r.preventDefault(),r.target.blur())}var z=g(),I=a(z);{var Z=r=>{var c=ae(),D=n(c),x=n(D);o(D),o(c),j(()=>Q(x,`Failed to load editor: ${t(H)??""}`)),e(r,c)},B=r=>{var c=g(),D=a(c);{var x=h=>{var K=ne();e(h,K)},F=h=>{var K=ie(),f=n(K),L=n(f);{var p=u=>{var s=oe();Gt(s),s.__input=k=>nt(k.currentTarget.value),s.__keydown=w,Vt(s,k=>y(W,k),()=>t(W)),j(()=>Ht(s,t(T))),Qt("blur",s,m),e(u,s)},b=u=>{var s=se();s.__click=it;var k=n(s,!0);o(s),j(()=>Q(k,t(Y)||"Untitled")),e(u,s)};ot(L,u=>{t(R)?u(p):u(b,!1)})}o(f);var V=i(f,2),tt=n(V);Vt(tt,u=>y(S,u),()=>t(S)),o(V),o(K),e(h,K)};ot(D,h=>{t(J)?h(x):h(F,!1)},!0)}e(r,c)};ot(I,r=>{t(H)?r(Z):r(B,!1)})}e(st,z),Tt()}Mt(["input","keydown","click"]);var de=d('<div class="flex-1 flex items-center justify-center"><div class="editor-loading" aria-live="polite" aria-busy="true"><div class="editor-loading-spinner"></div> <p>Loading...</p></div></div>'),ve=d('<div class="flex-1 flex items-center justify-center"><div class="text-center text-muted-foreground"><p>Interval not found</p></div></div>'),ue=d("<!> <span> </span>",1),_e=d('<!> <span class="ml-2"> </span>',1),pe=d("<!> <!>",1),ce=d("<!> <span> </span>",1),fe=d('<!> <span class="ml-2"> </span>',1),me=d("<!> <!>",1),ge=d('<div class="flex-1 flex overflow-hidden"><div class="flex-1 overflow-auto"><div class="flex items-center gap-2 px-4 py-3 border-b border-border lg:hidden"><!> <!></div> <!></div> <aside class="hidden lg:block w-64 shrink-0 border-l border-border overflow-auto bg-card"><!></aside></div>');function Le(st,v){St(v,!0);const N=zt(),S=pt(()=>qt.params.id),E=Bt(N),l=pt(()=>(E.data??[]).find(m=>m.id===t(S))??null),H=Object.values(jt),J=Object.values(Rt);function R(m){t(l)&&N.update(t(l).id,w=>{w.status=m,w.updatedAt=Date.now()})}function T(m){t(l)&&N.update(t(l).id,w=>{w.priority=m,w.updatedAt=Date.now()})}var W=g(),Y=a(W);{var it=m=>{var w=de();e(m,w)},nt=m=>{var w=g(),z=a(w);{var I=B=>{var r=ve();e(B,r)},Z=B=>{var r=ge(),c=n(r),D=n(c),x=n(D);_(x,()=>wt,(p,b)=>{b(p,{children:(V,tt)=>{var u=pe(),s=a(u);_(s,()=>bt,($,O)=>{O($,{class:"flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-muted transition-colors",children:(U,et)=>{var P=ue(),A=a(P);ct(A,{get status(){return t(l).status},size:14});var M=i(A,2),C=n(M,!0);o(M),j(()=>Q(C,ft[t(l).status])),e(U,P)},$$slots:{default:!0}})});var k=i(s,2);_(k,()=>yt,($,O)=>{O($,{align:"start",children:(U,et)=>{var P=g(),A=a(P);_(A,()=>$t,(M,C)=>{C(M,{get value(){return t(l).status},onValueChange:R,children:(q,rt)=>{var G=g(),Dt=a(G);mt(Dt,17,()=>H,gt,(Et,at)=>{var lt=g(),It=a(lt);_(It,()=>Pt,(Lt,kt)=>{kt(Lt,{get value(){return t(at)},children:(Ot,Ft)=>{var dt=_e(),vt=a(dt);ct(vt,{get status(){return t(at)},size:14});var ut=i(vt,2),At=n(ut,!0);o(ut),j(()=>Q(At,ft[t(at)])),e(Ot,dt)},$$slots:{default:!0}})}),e(Et,lt)}),e(q,G)},$$slots:{default:!0}})}),e(U,P)},$$slots:{default:!0}})}),e(V,u)},$$slots:{default:!0}})});var F=i(x,2);_(F,()=>wt,(p,b)=>{b(p,{children:(V,tt)=>{var u=me(),s=a(u);_(s,()=>bt,($,O)=>{O($,{class:"flex items-center gap-2 px-2 py-1.5 text-sm rounded-sm hover:bg-muted transition-colors",children:(U,et)=>{var P=ce(),A=a(P);xt(A,{get priority(){return t(l).priority},size:14});var M=i(A,2),C=n(M,!0);o(M),j(()=>Q(C,ht[t(l).priority])),e(U,P)},$$slots:{default:!0}})});var k=i(s,2);_(k,()=>yt,($,O)=>{O($,{align:"start",children:(U,et)=>{var P=g(),A=a(P);_(A,()=>$t,(M,C)=>{C(M,{get value(){return t(l).priority},onValueChange:T,children:(q,rt)=>{var G=g(),Dt=a(G);mt(Dt,17,()=>J,gt,(Et,at)=>{var lt=g(),It=a(lt);_(It,()=>Pt,(Lt,kt)=>{kt(Lt,{get value(){return t(at)},children:(Ot,Ft)=>{var dt=fe(),vt=a(dt);xt(vt,{get priority(){return t(at)},size:14});var ut=i(vt,2),At=n(ut,!0);o(ut),j(()=>Q(At,ht[t(at)])),e(Ot,dt)},$$slots:{default:!0}})}),e(Et,lt)}),e(q,G)},$$slots:{default:!0}})}),e(U,P)},$$slots:{default:!0}})}),e(V,u)},$$slots:{default:!0}})}),o(D);var h=i(D,2);{var K=p=>{var b=g(),V=a(b);Nt(V,()=>t(S),tt=>{le(tt,{get intervalId(){return t(S)},get interval(){return t(l)}})}),e(p,b)};ot(h,p=>{t(S)&&p(K)})}o(c);var f=i(c,2),L=n(f);re(L,{get interval(){return t(l)}}),o(f),o(r),e(B,r)};ot(z,B=>{t(l)?B(Z,!1):B(I)},!0)}e(m,w)};ot(Y,m=>{E.isLoading?m(it):m(nt,!1)})}e(st,W),Tt()}export{Le as component};
